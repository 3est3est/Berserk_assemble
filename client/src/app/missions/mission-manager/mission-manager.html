<div class="relative min-h-screen bg-black">
  <div class="bg-mesh"></div>

  <div class="max-w-7xl mx-auto px-6 py-12 animate-in pb-32">
    <!-- Header -->
    <header class="mb-16 flex flex-col md:flex-row md:items-end justify-between gap-8">
      <div>
        <div class="glass-pill mb-4 text-indigo-400">Command Authority</div>
        <h1 class="text-5xl font-black uppercase tracking-tighter">
          Mission <span class="vibe-gradient">Manager</span>
        </h1>
        <p class="text-[10px] font-black uppercase tracking-[0.4em] text-white/40 mt-2">
          Oversee and coordinate your custom operational sectors.
        </p>
      </div>
      <button
        pButton
        label="INITIALIZE SECTOR"
        icon="pi pi-plus"
        (click)="onCreate()"
        class="p-button-primary h-14 px-10 rounded-2xl"
      ></button>
    </header>

    <!-- Management Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      @for (mission of myMissions(); track mission.id; let i = $index) {
        <div class="mission-card flex flex-col p-8 group" [style.animation-delay]="i * 0.05 + 's'">
          <!-- Card Header -->
          <div class="flex justify-between items-start mb-10">
            <span class="text-[9px] font-black uppercase tracking-[0.3em] opacity-40 italic"
              >CHIEF / #{{ mission.id }}</span
            >
            <div class="flex gap-2">
              <button
                pButton
                icon="pi pi-pencil"
                (click)="onEdit(mission)"
                class="p-button-text w-8 h-8 p-0 opacity-40 hover:opacity-100"
              ></button>
              <button
                pButton
                icon="pi pi-trash"
                (click)="onDelete(mission)"
                class="p-button-text p-button-danger w-8 h-8 p-0 opacity-20 hover:opacity-100"
              ></button>
            </div>
          </div>

          <!-- Mission Core -->
          <div class="flex-grow mb-12">
            <h3
              class="text-2xl font-black uppercase tracking-tighter mb-4 group-hover:text-indigo-400 transition-colors"
            >
              {{ mission.name }}
            </h3>
            <p class="text-xs text-white/40 font-medium leading-relaxed line-clamp-2">
              {{ mission.description || 'Command briefing pending. Sector status established.' }}
            </p>
          </div>

          <!-- Metrics -->
          <div
            class="grid grid-cols-2 gap-px bg-white/5 rounded-2xl overflow-hidden border border-white/5 mb-8"
          >
            <div class="bg-black/20 p-4">
              <span class="text-[8px] font-black uppercase tracking-widest opacity-30 block mb-2"
                >Personnel</span
              >
              <div class="flex items-center gap-2">
                <i class="pi pi-users text-indigo-400 text-[10px]"></i>
                <span class="text-[11px] font-black"
                  >{{ mission.crew_count || 0
                  }}<span class="opacity-20"> / {{ mission.max_crew }}</span></span
                >
              </div>
            </div>
            <div class="bg-black/20 p-4">
              <span class="text-[8px] font-black uppercase tracking-widest opacity-30 block mb-2"
                >Protocol</span
              >
              <span class="text-[11px] font-black uppercase">{{ mission.status }}</span>
            </div>
          </div>

          <!-- Action -->
          <button
            pButton
            label="MANAGE SECTOR"
            icon="pi pi-arrow-right"
            iconPos="right"
            [routerLink]="['/missions', mission.id]"
            class="w-full h-12 text-[10px] font-black tracking-widest p-button-outlined border-white/10"
          ></button>
        </div>
      } @empty {
        <div
          class="col-span-full py-40 flex flex-col items-center justify-center mission-card opacity-50 text-center"
        >
          <div
            class="w-20 h-20 rounded-3xl bg-white/5 flex items-center justify-center mb-8 border border-white/10"
          >
            <i class="pi pi-plus text-3xl opacity-20"></i>
          </div>
          <h3 class="text-xl font-black uppercase tracking-tight mb-4">No Sectors Created</h3>
          <p
            class="text-[10px] font-black uppercase tracking-[0.4em] opacity-40 max-w-xs leading-loose"
          >
            You haven't initialized any missions yet. Create your first operation to begin
            recruitment.
          </p>
        </div>
      }
    </div>
  </div>
</div>
